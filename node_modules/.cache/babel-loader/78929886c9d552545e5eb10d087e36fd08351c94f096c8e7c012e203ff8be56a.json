{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/User/Desktop/LibraryClient/booklibrary/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/User/Desktop/LibraryClient/booklibrary/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/User/Desktop/LibraryClient/booklibrary/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import{SD_Roles}from\"../Utility/SD\";import inputHelper from\"../Helper/inputHelper\";import{useRegisterUserMutation}from\"../Apis/authApi\";import toastNotify from\"../Helper/toastNotify\";import{useNavigate}from\"react-router-dom\";import MainLoader from\"../Components/Common/MainLoader\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Register(){var navigate=useNavigate();var _useRegisterUserMutat=useRegisterUserMutation(),_useRegisterUserMutat2=_slicedToArray(_useRegisterUserMutat,1),registerUser=_useRegisterUserMutat2[0];var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState({email:\"\",password:\"\",name:\"\",role:\"\"}),_useState4=_slicedToArray(_useState3,2),userInput=_useState4[0],setUserInput=_useState4[1];var handleUserInput=function handleUserInput(e){var tempData=inputHelper(e,userInput);setUserInput(tempData);};var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();setLoading(true);_context.next=4;return registerUser({email:userInput.email,password:userInput.password,name:userInput.name,role:userInput.role});case 4:response=_context.sent;if(response.data){toastNotify(\"Registration successful! Please login to continue.\");navigate(\"/login\");}else if(response.error){toastNotify(response.error.data.errorMessages[0],\"error\");}setLoading(false);case 7:case\"end\":return _context.stop();}},_callee);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"container text-center\",children:[loading&&/*#__PURE__*/_jsx(MainLoader,{}),/*#__PURE__*/_jsxs(\"form\",{method:\"post\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"h1\",{className:\"mt-5\",children:\"Register\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-5\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-6 offset-sm-3 col-xs-12 mt-4\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"Enter Email\",required:true,name:\"email\",value:userInput.email,onChange:handleUserInput})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-6 offset-sm-3 col-xs-12 mt-4\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"Enter Name\",required:true,name:\"name\",value:userInput.name,onChange:handleUserInput})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-6 offset-sm-3 col-xs-12 mt-4\",children:/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",placeholder:\"Enter Password\",required:true,name:\"password\",value:userInput.password,onChange:handleUserInput})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-6 offset-sm-3 col-xs-12 mt-4\",children:/*#__PURE__*/_jsxs(\"select\",{className:\"form-control form-select\",required:true,name:\"role\",value:userInput.role,onChange:handleUserInput,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"--Select Role--\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\".concat(SD_Roles.AUTHOR),children:\"Author\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\".concat(SD_Roles.ADMIN),children:\"Admin\"})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-5\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-success\",disabled:loading,children:\"Register\"})})]})]});}export default Register;","map":{"version":3,"names":["React","useState","SD_Roles","inputHelper","useRegisterUserMutation","toastNotify","useNavigate","MainLoader","jsx","_jsx","jsxs","_jsxs","Register","navigate","_useRegisterUserMutat","_useRegisterUserMutat2","_slicedToArray","registerUser","_useState","_useState2","loading","setLoading","_useState3","email","password","name","role","_useState4","userInput","setUserInput","handleUserInput","e","tempData","handleSubmit","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","wrap","_callee$","_context","prev","next","preventDefault","sent","data","error","errorMessages","stop","_x","apply","arguments","className","children","method","onSubmit","type","placeholder","required","value","onChange","concat","AUTHOR","ADMIN","disabled"],"sources":["C:/Users/User/Desktop/LibraryClient/booklibrary/src/Pages/Register.tsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { SD_Roles } from \"../Utility/SD\";\r\nimport inputHelper from \"../Helper/inputHelper\";\r\nimport { useRegisterUserMutation } from \"../Apis/authApi\";\r\nimport { apiResponse } from \"../Interfaces\";\r\nimport toastNotify from \"../Helper/toastNotify\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport MainLoader from \"../Components/Common/MainLoader\";\r\n\r\nfunction Register() {\r\n  const navigate = useNavigate();\r\n  const [registerUser] = useRegisterUserMutation();\r\n  const [loading, setLoading] = useState(false);\r\n  const [userInput, setUserInput] = useState({\r\n    email: \"\",\r\n    password: \"\",\r\n    name: \"\",\r\n    role: \"\",\r\n  });\r\n\r\n  const handleUserInput = (\r\n    e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>\r\n  ) => {\r\n    const tempData = inputHelper(e, userInput);\r\n    setUserInput(tempData);\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent<HTMLFormElement>) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n\r\n    const response: apiResponse = await registerUser({\r\n      email: userInput.email,\r\n      password: userInput.password,\r\n      name: userInput.name,\r\n      role: userInput.role,\r\n    });\r\n\r\n    if (response.data) {\r\n      toastNotify(\"Registration successful! Please login to continue.\");\r\n      navigate(\"/login\");\r\n    } else if (response.error) {\r\n      toastNotify(response.error.data.errorMessages[0], \"error\");\r\n    }\r\n\r\n    setLoading(false);\r\n  };\r\n\r\n  return (\r\n    <div className=\"container text-center\">\r\n      {loading && <MainLoader />}\r\n      <form method=\"post\" onSubmit={handleSubmit}>\r\n        <h1 className=\"mt-5\">Register</h1>\r\n        <div className=\"mt-5\">\r\n          <div className=\"col-sm-6 offset-sm-3 col-xs-12 mt-4\">\r\n            <input\r\n              type=\"text\"\r\n              className=\"form-control\"\r\n              placeholder=\"Enter Email\"\r\n              required\r\n              name=\"email\"\r\n              value={userInput.email}\r\n              onChange={handleUserInput}\r\n            />\r\n          </div>\r\n          <div className=\"col-sm-6 offset-sm-3 col-xs-12 mt-4\">\r\n            <input\r\n              type=\"text\"\r\n              className=\"form-control\"\r\n              placeholder=\"Enter Name\"\r\n              required\r\n              name=\"name\"\r\n              value={userInput.name}\r\n              onChange={handleUserInput}\r\n            />\r\n          </div>\r\n          <div className=\"col-sm-6 offset-sm-3 col-xs-12 mt-4\">\r\n            <input\r\n              type=\"password\"\r\n              className=\"form-control\"\r\n              placeholder=\"Enter Password\"\r\n              required\r\n              name=\"password\"\r\n              value={userInput.password}\r\n              onChange={handleUserInput}\r\n            />\r\n          </div>\r\n          <div className=\"col-sm-6 offset-sm-3 col-xs-12 mt-4\">\r\n            <select\r\n              className=\"form-control form-select\"\r\n              required\r\n              name=\"role\"\r\n              value={userInput.role}\r\n              onChange={handleUserInput}\r\n            >\r\n              <option value=\"\">--Select Role--</option>\r\n              <option value={`${SD_Roles.AUTHOR}`}>Author</option>\r\n              <option value={`${SD_Roles.ADMIN}`}>Admin</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n        <div className=\"mt-5\">\r\n          <button type=\"submit\" className=\"btn btn-success\" disabled={loading}>\r\n            Register\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Register;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}